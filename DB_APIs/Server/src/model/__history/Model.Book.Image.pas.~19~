Unit Model.Book.Image;

Interface

Uses
    System.SysUtils, System.Generics.Collections,
    MVCFramework.Serializer.Commons,
    MVCFramework.ActiveRecord,
    MVCFramework.Nullables;

Type
    [MVCNameCase(ncLowerCase)]
    [MVCTable('Book_Image')]  // اصلاح نام جدول برای جلوگیری از مشکل در برخی پایگاه‌داده‌ها
    TImage = Class(TMVCActiveRecord)
    Private
        [MVCTableField('ID', [foPrimaryKey, foAutoGenerated])]
        FID: Int64;

        [MVCTableField('ImageGuid')]
        FImageGuid: TGUID;  // اصلاح نوع از string به TGUID

        [MVCTableField('BookID')]
        FBookID: Int64;

        [MVCTableField('IsPrimary')]
        FIsPrimary: NullableBoolean;

        [MVCTableField('UploadDate')]
        FUploadDate: NullableTDateTime;

        [MVCTableField('FileSizeKB')]
        FFileSizeKB: NullableInt32;

        [MVCTableField('ContentType')]
        FContentType: NullableString;

        [MVCTableField('OriginalFileName')]
        FOriginalFileName: NullableString;

        [MVCTableField('ImageUrl')]
        FImageUrl: NullableString;

        [MVCTableField('Width')]
        FWidth: NullableInt32;

        [MVCTableField('Height')]
        FHeight: NullableInt32;

    Public
        Property ID: Int64 read FID write FID;
        Property ImageGuid: TGUID read FImageGuid write FImageGuid;
        Property BookID: Int64 read FBookID write FBookID;
        Property IsPrimary: NullableBoolean read FIsPrimary write FIsPrimary;
        Property UploadDate: NullableTDateTime read FUploadDate write FUploadDate;
        Property FileSizeKB: NullableInt32 read FFileSizeKB write FFileSizeKB;
        Property ContentType: NullableString read FContentType write FContentType;
        Property OriginalFileName: NullableString read FOriginalFileName write FOriginalFileName;
        Property ImageUrl: NullableString read FImageUrl write FImageUrl;
        Property Width: NullableInt32 read FWidth write FWidth;
        Property Height: NullableInt32 read FHeight write FHeight;

        Constructor Create; override;  // برای مقداردهی پیش‌فرض

    End;

Implementation

Constructor TImage.Create;
Begin
    Inherited;
    FIsPrimary := False;  // مقدار پیش‌فرض
    FUploadDate := Now;   // مقدار پیش‌فرض برای تاریخ
End;

End.

